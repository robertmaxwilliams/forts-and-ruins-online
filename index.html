<!DOCTYPE html>
<html>
<head>
  <!-- Authors: Robert Max Williams. Public Domain Dedication. -->
  <meta charset="utf-8">
  <title>Forts and Ruins Multiplayer</title>

  <!-- are CDN's the devil? Proabably ok for now. -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdn.socket.io/socket.io-1.0.0.js"></script>



<script>
  $(document).ready(function(){
    $("#send-name").click(function(){
      socket.emit('setname',  $("#username").val())
      console.log("sendt stuff")
    });
    $("#send-message").click(function(){
      let message = $("#message").val() + '\n'
      socket.emit('message',  message)
      alltext += message
      console.log("sendt stuff")
      $('#textbox').text(alltext)
    });

  });
  
  
</script>

<script>
  var room = "1234"
  var alltext = ""
  var socket = io('http://localhost:8080');
  socket.on('connect', function() {
    socket.emit('room', room)
    console.log("joined room ", room)
  });

  socket.on('message', function(data) {
    console.log("got a : ", data)
    alltext += data
    $('#textbox').text(alltext)
  });
</script>

</head>

<body>
<button id="send-name">press me to set name</button>
<input id="username" type="text" value="">
<br>
<button id="send-message">send</button>
<input id="message" type="text" value="">
<p id="textbox" style="white-space:pre-wrap;">Nothing yet</p>
</body>
